<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Investing program</title>
    <link rel="shortcut icon" href="https://img.icons8.com/fluent/48/000000/rainy-weather.png" type="image/x-icon"/>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <nav>
    <ul>
      <li><a href="/">Главная</a></li>
      <li><a href="/create">Создать компанию</a></li>
      <li><a href="/update">Обновить компанию</a></li>
      <li><a href="/companies">Список компаний</a></li>
    </ul>
  </nav>
  <div class="form">
    <form action="/companies" method="POST">
        <input type="text" placeholder="Введите название компании" name="comp_name" id="input-comp">
        <button type="submit" class="submit-button">Поиск</button>
    </form>
  {% if search %}
    <p>Выполнен поиск "{{ search }}"</p>
    <a href="{{ url_for('companies_page') }}">Сбросить поиск</a>
  {% endif %}
  </div>
    <table class="table">
      <tr class="tr-table">
        <th class="th-table ticker">Индекс</th>
        <th class="th-table name">Имя</th>
        <th class="th-table sector">Область</th>
      </tr>
      {% for company in query.items %}
      <tr class="tr-table">
        <td class="td-table ticker"><a href="{{ url_for('company_info_page', ticker=company.ticker) }}">{{ company.ticker }}</a></td>
        <td class="td-table name">{{ company.name }}</td>
        <td class="td-table sector">{{ company.sector }}</td>
      </tr>
      {% endfor %}
    </table>
    {% if query.pages > 1 %}
  <div class="pagination">
    {% for num in query.iter_pages() %}
      {% if num %}
        {% if num == query.page %}
          <span class="current">{{ num }}</span>
        {% else %}
          <a href="{{ url_for('companies_page', page=num) }}">{{ num }}</a>
        {% endif %}
      {% else %}
        <span class="ellipsis">…</span>
      {% endif %}
    {% endfor %}
  </div>
{% endif %}
</body>
</html>